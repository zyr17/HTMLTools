<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
    <title>MahjongHelper</title>
    <link rel="stylesheet" href="index.css" type="text/css" />
    <script>if (typeof module === 'object') { window.module = module; module = undefined; }</script>
    <!-- <script src="https://unpkg.com/vue@next"></script> -->
    <!-- <script src="https://unpkg.com/vue@3.2.29/dist/vue.global.prod.js"></script> -->
    <script src="lib/vue.3.2.29.global.prod.js"></script>
    <script>if (window.module) module = window.module;</script>
</head>

<body>
    <div>
        <div id="maindiv">
            <div v-show="settings.showsettings" id="settingsdiv" class="coverall">
                <div class="hint" :style="'visibility: ' + (settings.showhint ? 'visible' : 'hidden')">警告：局中修改，错误数值可能导致未知异常！</div>
                <div style="font-size: 150%;">初始点：</div>
                <div id="startsettings" class="settings4inputs">
                    <div v-for="(data, index) in settings.initscore" class="settingsinput">
                        <div>{{ settings.kazename[index] }}</div>
                        <input v-model.number="settings.initscore[index]">
                    </div>
                </div>
                <div style="font-size: 150%;">马点：</div>
                <div id="umasettings" class="settings4inputs">
                    <div v-for="(data, index) in settings.uma" class="settingsinput">
                        <div>{{ index + 1 }}位</div>
                        <input v-model.number="settings.uma[index]">
                    </div>
                </div>
                <div style="font-size: 150%;">流局听牌得点：</div>
                <div id="tenpaigetssettings" class="settings3inputs">
                    <div v-for="index in [1, 2, 3]" class="settingsinput">
                        <div>{{ index }}人</div>
                        <input v-model.number="settings.tenpaigets[index]">
                    </div>
                </div>
                <div style="font-size: 150%;">流局没听失点：</div>
                <div id="tenpaigivessettings" class="settings3inputs">
                    <div v-for="index in [1, 2, 3]" class="settingsinput">
                        <div>{{ index }}人</div>
                        <input v-model.number="settings.tenpaigives[index]">
                    </div>
                </div>
                <div id="reachhonbabacksettings" class="settings3inputs">
                    <div class="settingsinput">
                        <div>返点</div>
                        <input v-model.number="settings.backscore">
                    </div>
                    <div class="settingsinput">
                        <div>立直需点</div>
                        <input v-model.number="settings.reachcost">
                    </div>
                    <div class="settingsinput">
                        <div>本场增点</div>
                        <input v-model.number="settings.honbacost">
                    </div>
                </div>
                <div id="hinthistorysettings">
                    <input type="checkbox" id="showhintckbx" v-model="settings.showhint">
                    <label for="showhintckbx">显示提示文字</label>
                    <div style="position: relative; margin-left: 20%;">历史记录长度</div>
                    <input v-model.number="settings.historylength" style="width: 10%;">
                </div>
                <div>
                    <button @click="settings.showresetsettingsconfirm = true;">重置设置</button>
                    <button @click="manualinit(); settings.showmanualpoint = true;" style="margin-left: 5%;">手动设置得点</button>
                </div>
                <div>
                    <button @click="settings.showsettings = false; savesettings();">关闭</button>
                </div>
                <div v-show="settings.showresetsettingsconfirm" id="resetsettingsconfirm" style="height: 100%; width: 100%; font-size: 200%;">
                    <div class="coverall" >确认重置设置？</div>
                    <div class="yesnobtn" style="z-index: 1999; width: 100%; height: 50%; top: 50%; display: flex; align-items: center; justify-content: space-around; flex-wrap: wrap;">
                        <button id="resetsettingsyes" style="color: red; font-weight: bold; height: auto" @click="settings.showresetsettingsconfirm = false; resetsettingsclick();">确认</button>
                        <button id="resetsettingsno" style="height: auto" @click="settings.showresetsettingsconfirm = false;">取消</button>
                    </div>
                </div>
                <div v-show="settings.showmanualpoint" id="manualpoint" style="height: 100%; width: 100%; font-size: 200%;">
                    <div class="coverall" >
                        <div style="font-size: 200%;">手动设置得点</div>
                        <div id="manualpoints" class="settings4inputs">
                            <div v-for="(data, index) in settings.manualpoints" class="settingsinput">
                                <div>{{ settings.kazename[index] }}</div>
                                <input v-model.number="settings.manualpoints[index]">
                            </div>
                        </div>
                        <div style="font-size: 150%;">是否继续连庄</div>
                        <div id="manualnextkyoku">
                            <div>
                                <input type="radio" id="notmanualnextkyokuckbx" v-model="settings.manualnextkyoku" :value="false">
                                <label for="notmanualnextkyokuckbx">连庄</label>
                            </div>
                            <div>
                                <input type="radio" id="manualnextkyokuckbx" v-model="settings.manualnextkyoku" :value="true">
                                <label for="manualnextkyokuckbx">过庄</label>
                            </div>
                        </div>
                        <div style="font-size: 150%;">是否结算场棒供托</div>
                        <div id="manualkyoutaku">
                            <div>
                                <input type="radio" id="manualkyoutakuradio" v-model="settings.manualkyoutaku" :value="true">
                                <label for="manualkyoutakuradio">结算</label>
                            </div>
                            <div>
                                <input type="radio" id="notmanualkyoutakuradio" v-model="settings.manualkyoutaku" :value="false">
                                <label for="notmanualkyoutakuradio">不结算</label>
                            </div>
                        </div>
                        <div style="font-size: 150%;">供托结算起家</div>
                        <div id="manualkyoutakustart">
                            <div v-for="index in [0, 1, 2, 3]">
                                <input :id="'manualkyoutakustart' + index" type="radio" v-model="settings.manualkyoutakustart" :value="index" :disabled="!settings.manualkyoutaku">
                                <label :for="'manualkyoutakustart' + index">{{ settings.kazename[index] }}</label>
                            </div>
                        </div>
                        <div class="yesnobtn" style="width: 100%; display: flex; align-items: center; justify-content: space-around; flex-wrap: wrap;">
                            <button id="resetsettingsyes" style="height: auto" @click="settings.showsettings = settings.showmanualpoint = false; manualpointclick();">确认</button>
                            <button id="resetsettingsno" style="height: auto" @click="settings.showmanualpoint = false;">取消</button>
                        </div>
                    </div>
                </div>

            </div>
            <div v-show="settings.showagari" id="agaridiv" :class="settings.positionname[settings.agariposition]">
                <div id="agaricentercolordiv" :style="agaricentercolorstyle"></div>
                <div id="agaricentertextdiv">
                    <div class="bottom">自摸</div>
                    <div class="right">荣和</div>
                    <div class="top">荣和</div>
                    <div class="left">荣和</div>
                    <div class="btndiv">
                        <button @click="settings.showagari = false; agariconfirm();" :disabled="!canagariconfirm">结算</button>
                        <button @click="settings.showagari = false;">取消</button>
                    </div>
                </div>
                <div v-for="(pos, pindex) in settings.positionname" class="hand" :class="pos">
                    <div class="up">
                        <div class="handiv">
                            番数
                        </div>
                        <div class="fudiv">
                            符数
                        </div>
                    </div>
                    <div class="middle">
                        <div class="handiv">
                            <button v-for="(data, index) in agarihanbtndata(pindex)" :style="data.style" :index="index" @click="agarihanclick(pindex, index)">{{ data.text }}</button>
                        </div>
                        <div class="fudiv">
                            <button v-for="(data, index) in agarifubtndata(pindex)" :style="data.style" :disabled="settings.agarihaninfo[pindex][0] != 1" :index="index" @click="agarifuclick(pindex, index)">{{ data.text }}</button>
                        </div>
                    </div>
                    <div class="down">
                        <div v-show="settings.showhint" class="hint">部分按钮可点击改变</div>
                        <!-- <div class="handiv"></div> -->
                        <!-- <div class="fudiv"></div> -->
                    </div>
                </div>
            </div>
            <div v-show="settings.showroundresults || settings.showfinalresults" id="resultsdiv" @click="resultsdivclick();">
                <div class="hint">{{ settings.showhint ? '点击任意位置关闭' : '' }}</div>
                <div v-for="(res, index) in settings.roundresults" class="resultscore" :class="settings.positionname[index] + ' ' + resultfontcolor(res)" :index="index">
                    {{ res > 0 ? '+' : res < 0 ? '-' : '±' }}{{ Math.abs(res) }}
                </div>
            </div>
            <div v-if="settings.showdices" id="dicesdiv" @click="settings.showdices = false">
                <div id="showdicesdiv">
                    <div id="dice1div">
                        <svg v-if="settings.dices[0] == 1" class="dice1svg" t="1645538296085" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2786"><path d="M15.013749 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="2787"></path><path d="M867.264776 1016.986657H171.748973a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 171.748973 7.013343h695.515803A164.683679 164.683679 0 0 1 1031.792603 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM171.748973 22.598549A149.098473 149.098473 0 0 0 22.806352 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515803a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="2788"></path><path d="M519.506874 512.025975m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" fill="#FF0000" p-id="2789"></path></svg>
                        <svg v-if="settings.dices[0] == 2" class="dice2svg" t="1645538353334" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2921"><path d="M15.013749 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="2922"></path><path d="M867.264776 1016.986657H171.748973a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 171.748973 7.013343h695.515803A164.683679 164.683679 0 0 1 1031.792603 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM171.748973 22.598549A149.098473 149.098473 0 0 0 22.806352 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515803a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="2923"></path><path d="M519.506874 262.454873m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="2924"></path><path d="M519.506874 781.961747m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="2925"></path></svg>
                        <svg v-if="settings.dices[0] == 3" class="dice3svg" t="1645538370777" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3057"><path d="M11.481102 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="3058"></path><path d="M863.732129 1016.986657H168.164375A164.631728 164.631728 0 0 1 3.688499 852.45883V171.437269A164.631728 164.631728 0 0 1 168.164375 7.013343h695.567754A164.683679 164.683679 0 0 1 1028.259956 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM168.164375 22.598549A149.098473 149.098473 0 0 0 19.273705 171.437269v681.021561a149.098473 149.098473 0 0 0 148.89067 148.942621h695.567754a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="3059"></path><path d="M519.506874 522.20831m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="3060"></path><path d="M800.767896 262.454873m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="3061"></path><path d="M260.117092 781.961747m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="3062"></path></svg>
                        <svg v-if="settings.dices[0] == 4" class="dice4svg" t="1645538387737" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3892"><path d="M15.013749 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="3893"></path><path d="M867.264776 1016.986657H171.748973a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 171.748973 7.013343h695.515803A164.683679 164.683679 0 0 1 1031.792603 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM171.748973 22.598549A149.098473 149.098473 0 0 0 22.806352 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515803a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="3894"></path><path d="M260.117092 262.454873m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" fill="#FF0000" p-id="3895"></path><path d="M800.767896 262.454873m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" fill="#FF0000" p-id="3896"></path><path d="M260.117092 781.961747m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" fill="#FF0000" p-id="3897"></path><path d="M800.767896 781.961747m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" fill="#FF0000" p-id="3898"></path></svg>
                        <svg v-if="settings.dices[0] == 5" class="dice5svg" t="1645538402644" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4794"><path d="M14.078636 14.805946m156.735224 0l695.515804 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515804 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="4795"></path><path d="M866.329664 1016.986657H170.81386a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 170.81386 7.013343h695.515804A164.683679 164.683679 0 0 1 1030.857491 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM170.81386 22.598549A149.098473 149.098473 0 0 0 21.871239 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515804a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="4796"></path><path d="M260.117092 262.454873m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4797"></path><path d="M800.767896 262.454873m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4798"></path><path d="M519.506874 522.20831m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" fill="#FF0000" p-id="4799"></path><path d="M260.117092 781.961747m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4800"></path><path d="M800.767896 781.961747m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4801"></path></svg>
                        <svg v-if="settings.dices[0] == 6" class="dice6svg" t="1645538422111" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4935"><path d="M15.013749 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="4936"></path><path d="M867.264776 1016.986657H171.748973a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 171.748973 7.013343h695.515803A164.683679 164.683679 0 0 1 1031.792603 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM171.748973 22.598549A149.098473 149.098473 0 0 0 22.806352 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515803a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="4937"></path><path d="M291.183603 206.088377m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4938"></path><path d="M747.830146 206.088377m-129.876719 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4939"></path><path d="M291.183603 522.20831m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4940"></path><path d="M747.830146 522.20831m-129.876719 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4941"></path><path d="M291.183603 838.380194m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4942"></path><path d="M747.830146 838.380194m-129.876719 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4943"></path></svg>
                    </div>
                    <div id="dice2div">
                        <svg v-if="settings.dices[1] == 1" class="dice1svg" t="1645538296085" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2786"><path d="M15.013749 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="2787"></path><path d="M867.264776 1016.986657H171.748973a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 171.748973 7.013343h695.515803A164.683679 164.683679 0 0 1 1031.792603 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM171.748973 22.598549A149.098473 149.098473 0 0 0 22.806352 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515803a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="2788"></path><path d="M519.506874 512.025975m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" fill="#FF0000" p-id="2789"></path></svg>
                        <svg v-if="settings.dices[1] == 2" class="dice2svg" t="1645538353334" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2921"><path d="M15.013749 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="2922"></path><path d="M867.264776 1016.986657H171.748973a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 171.748973 7.013343h695.515803A164.683679 164.683679 0 0 1 1031.792603 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM171.748973 22.598549A149.098473 149.098473 0 0 0 22.806352 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515803a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="2923"></path><path d="M519.506874 262.454873m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="2924"></path><path d="M519.506874 781.961747m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="2925"></path></svg>
                        <svg v-if="settings.dices[1] == 3" class="dice3svg" t="1645538370777" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3057"><path d="M11.481102 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="3058"></path><path d="M863.732129 1016.986657H168.164375A164.631728 164.631728 0 0 1 3.688499 852.45883V171.437269A164.631728 164.631728 0 0 1 168.164375 7.013343h695.567754A164.683679 164.683679 0 0 1 1028.259956 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM168.164375 22.598549A149.098473 149.098473 0 0 0 19.273705 171.437269v681.021561a149.098473 149.098473 0 0 0 148.89067 148.942621h695.567754a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="3059"></path><path d="M519.506874 522.20831m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="3060"></path><path d="M800.767896 262.454873m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="3061"></path><path d="M260.117092 781.961747m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="3062"></path></svg>
                        <svg v-if="settings.dices[1] == 4" class="dice4svg" t="1645538387737" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3892"><path d="M15.013749 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="3893"></path><path d="M867.264776 1016.986657H171.748973a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 171.748973 7.013343h695.515803A164.683679 164.683679 0 0 1 1031.792603 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM171.748973 22.598549A149.098473 149.098473 0 0 0 22.806352 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515803a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="3894"></path><path d="M260.117092 262.454873m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" fill="#FF0000" p-id="3895"></path><path d="M800.767896 262.454873m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" fill="#FF0000" p-id="3896"></path><path d="M260.117092 781.961747m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" fill="#FF0000" p-id="3897"></path><path d="M800.767896 781.961747m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" fill="#FF0000" p-id="3898"></path></svg>
                        <svg v-if="settings.dices[1] == 5" class="dice5svg" t="1645538402644" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4794"><path d="M14.078636 14.805946m156.735224 0l695.515804 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515804 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="4795"></path><path d="M866.329664 1016.986657H170.81386a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 170.81386 7.013343h695.515804A164.683679 164.683679 0 0 1 1030.857491 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM170.81386 22.598549A149.098473 149.098473 0 0 0 21.871239 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515804a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="4796"></path><path d="M260.117092 262.454873m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4797"></path><path d="M800.767896 262.454873m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4798"></path><path d="M519.506874 522.20831m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" fill="#FF0000" p-id="4799"></path><path d="M260.117092 781.961747m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4800"></path><path d="M800.767896 781.961747m-129.876718 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4801"></path></svg>
                        <svg v-if="settings.dices[1] == 6" class="dice6svg" t="1645538422111" class="icon" viewBox="0 0 1039 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4935"><path d="M15.013749 14.805946m156.735224 0l695.515803 0q156.735224 0 156.735224 156.735224l0 680.91766q0 156.735224-156.735224 156.735224l-695.515803 0q-156.735224 0-156.735224-156.735224l0-680.91766q0-156.735224 156.735224-156.735224Z" fill="#FFFFFF" p-id="4936"></path><path d="M867.264776 1016.986657H171.748973a164.683679 164.683679 0 0 1-164.527827-164.527827V171.437269A164.683679 164.683679 0 0 1 171.748973 7.013343h695.515803A164.683679 164.683679 0 0 1 1031.792603 171.437269v681.021561a164.683679 164.683679 0 0 1-164.527827 164.527827zM171.748973 22.598549A149.098473 149.098473 0 0 0 22.806352 171.437269v681.021561a149.098473 149.098473 0 0 0 148.942621 148.942621h695.515803a149.098473 149.098473 0 0 0 148.942621-148.942621V171.437269a149.098473 149.098473 0 0 0-148.942621-148.83872z" fill="#AAAAAA" p-id="4937"></path><path d="M291.183603 206.088377m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4938"></path><path d="M747.830146 206.088377m-129.876719 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4939"></path><path d="M291.183603 522.20831m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4940"></path><path d="M747.830146 522.20831m-129.876719 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4941"></path><path d="M291.183603 838.380194m-129.876719 0a129.876719 129.876719 0 1 0 259.753438 0 129.876719 129.876719 0 1 0-259.753438 0Z" p-id="4942"></path><path d="M747.830146 838.380194m-129.876719 0a129.876719 129.876719 0 1 0 259.753437 0 129.876719 129.876719 0 1 0-259.753437 0Z" p-id="4943"></path></svg>
                    </div>
                </div>
                <div class="hint">{{ settings.showhint ? '点击任意位置关闭' : '' }}</div>
            </div>
            <div v-for="(player, index) in players" class="hand" :class="player.position" :index="index">
                <div class="up">
                    <div class="score">{{ player.score == -1 ? '' : player.score }}</div>
                </div>
                <div class="middle">
                    <div class="kaze">{{ player.kaze == -1 ? '&emsp;' : settings.kazename[player.kaze] }}</div>
                    <button class="reachbtn" @click="reachclick(index)" :disabled="player.reach || !started">立直</button>
                    <button class="agaribtn" @click="agariclick(index)" :disabled="!started">自摸/放铳</button>
                    <!-- <button v-if="player.tsumoorhoujyuu == ''" class="tsumohoujyuubtn" >自摸放铳</button> -->
                    <!-- <button v-if="player.tsumoorhoujyuu == 'tsumo'" class="tsumobtn" style="color: blue; font-weight: bold">&emsp;自摸&emsp;</button> -->
                    <!-- <button v-if="player.tsumoorhoujyuu == 'houjyuu'" class="houjyuubtn" style="color: red; font-weight: bold">&emsp;放铳&emsp;</button> -->
                    <button v-if="player.tenpai == 0" @click="ryuukyokuclick(index, -1)" class="notenbtn redfont" :disabled="!started">没听</button>
                    <button v-if="player.tenpai == 1" @click="ryuukyokuclick(index, 0)" class="tenpaibtn greenfont" :disabled="!started">听牌</button>
                    <button v-if="player.tenpai == -1" @click="ryuukyokuclick(index, 1)" class="ryuukyokubtn" :disabled="!started">流局</button>
                </div>
                <div class="down">
                    <div v-show="player.reach" class="reach tenbou">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 360 30"> <g> <title>Layer 1</title> <rect rx="4" id="svg_13" height="28" width="358" y="1" x="1" stroke-width="2" stroke="#b8b8b8" fill="#ffffff"/> <ellipse ry="10" rx="10" id="svg_14" cy="15" cx="180" stroke-width="0" stroke="#b8b8b8" fill="#a02419"/> </g> </svg>
                    </div>
                </div>
                <div v-if="player.agari" class="agaridiv"></div>
            </div>
            <div id="center">
                <div v-show="settings.showtenpaiconfirm" id="tenpaiconfirmdiv">
                    <button @click="tenpaiconfirm">听牌结算</button>
                </div>
                <div id="bakaze">{{ settings.kazename[bakaze] }}</div>
                <div id="kyoku">{{ kyoku == -1 ? '' : kyoku + 1 }}</div>
                <div id="honbakyoutaku">
                    <div v-show="honba != -1" id="honbaicon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"> <g> <title>Layer 1</title> <rect stroke-width="10" transform="rotate(45, 249.5, 250)" id="svg_3" height="560" width="141" y="-30" x="179" stroke="#a0a0a0" fill="#ffffff"/> <ellipse ry="14" rx="14" id="svg_4" cy="250" cx="213" stroke-width="0" stroke="#a0a0a0" fill="#545a81"/> <ellipse ry="14" rx="14" id="svg_6" cy="250" cx="287" stroke-width="0" stroke="#a0a0a0" fill="#545a81"/> <ellipse ry="14" rx="14" id="svg_7" cy="287" cx="250" stroke-width="0" stroke="#a0a0a0" fill="#545a81"/> <ellipse ry="14" rx="14" id="svg_8" cy="213" cx="250" stroke-width="0" stroke="#a0a0a0" fill="#545a81"/> <ellipse ry="14" rx="14" id="svg_9" cy="287" cx="176" stroke-width="0" stroke="#a0a0a0" fill="#545a81"/> <ellipse ry="14" rx="14" id="svg_10" cy="324" cx="213" stroke-width="0" stroke="#a0a0a0" fill="#545a81"/> <ellipse ry="14" rx="14" id="svg_11" cy="176" cx="287" stroke-width="0" stroke="#a0a0a0" fill="#545a81"/> <ellipse ry="14" rx="14" id="svg_12" cy="213" cx="324" stroke-width="0" stroke="#a0a0a0" fill="#545a81"/> </g> </svg>
                    </div>
                    <div id="honba">{{ honba == -1 ? '' : honba }}</div>
                    <div v-show="kyoutaku != -1" id="kyoutakuicon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"> <g> <title>Layer 1</title> <rect stroke-width="10" transform="rotate(45, 249.5, 250)" id="svg_3" height="560" width="141" y="-30" x="179" stroke="#a0a0a0" fill="#ffffff"/> <ellipse ry="37.5" rx="37.5" id="svg_4" cy="250" cx="250" stroke-width="0" stroke="#a0a0a0" fill="#a02419"/> </g> </svg>
                    </div>
                    <div id="kyoutaku">{{ kyoutaku == -1 ? '' : kyoutaku }}</div>
                </div>
                <div class="up">
                    <button v-if="!started" id="start" @click="startnew">开始</button>
                    <button v-if="started" id="result" @click="endmatch">终局</button>
                    <button id="settings" @click="settings.showsettings = true;">设置</button>
                </div>
                <div class="down">
                    <button id="dice" @click="gendices(); settings.showdices = true">骰子</button>
                    <button id="cancel" @click="settings.showcancelconfirm = true;" :disabled="logs.length <= 1">撤销</button>
                    <div v-show="settings.showcancelconfirm" id="cancelconfirm" style="height: 100%; width: 100%;">
                        <div class="coverall" >确认撤销？</div>
                        <div class="yesnobtn" style="z-index: 1999; width: 100%; height: 100%;">
                            <button id="cancelyes" style="color: red; font-weight: bold;" @click="settings.showcancelconfirm = false; cancelclick();">确认</button>
                            <button id="cancelno" @click="settings.showcancelconfirm = false;">取消</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="const.js"></script>
    <script src="index.js"></script>
</body>

</html>